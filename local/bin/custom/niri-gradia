#!/bin/bash

# 1. Trigger the niri screenshot UI
niri msg action screenshot

# 2. Wait a split second for the file to actually be written to disk
sleep 0.5

# 3. Find the most recently changed file in the Screenshot folder
# Adjust the path below if your screenshots save elsewhere
SCREENSHOT_DIR="$HOME/Pictures/Screenshots"
LATEST_FILE=$(ls -t "$SCREENSHOT_DIR"/*.png 2>/dev/null | head -n 1)

# 4. Open it in Gradia if it exists
if [ -f "$LATEST_FILE" ]; then
    gradia "$LATEST_FILE"
else
    notify-send "Screenshot Error" "Could not find the saved file."
fi
